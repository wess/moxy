#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>

typedef enum { Result_int_Ok, Result_int_Err } Result_int_Tag;
typedef struct {
    Result_int_Tag tag;
    union {
        int ok;
        const char* err;
    };
} Result_int;



int main(void) {
    Result_int ok = (Result_int){ .tag = Result_int_Ok, .ok = 42 };
    switch (ok.tag) {
        case Result_int_Ok: {
            int v = ok.ok;
            printf("%d\n", v);
            break;
        }
        case Result_int_Err: {
            const char* e = ok.err;
            printf("%s\n", e);
            break;
        }
    }
    Result_int fail = (Result_int){ .tag = Result_int_Err, .err = "bad" };
    switch (fail.tag) {
        case Result_int_Ok: {
            int v = fail.ok;
            printf("%d\n", v);
            break;
        }
        case Result_int_Err: {
            const char* e = fail.err;
            printf("%s\n", e);
            break;
        }
    }
    return 0;
}

