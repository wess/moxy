#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>

typedef struct {
    int *data;
    int len;
    int cap;
} list_int;

static list_int list_int_make(int *init, int n) {
    list_int l;
    l.cap = n < 8 ? 8 : n;
    l.data = (int*)malloc(l.cap * sizeof(int));
    l.len = n;
    if (n > 0) memcpy(l.data, init, n * sizeof(int));
    return l;
}

static void list_int_push(list_int *l, int val) {
    if (l->len >= l->cap) {
        l->cap = l->cap < 8 ? 8 : l->cap * 2;
        l->data = (int*)realloc(l->data, l->cap * sizeof(int));
    }
    l->data[l->len++] = val;
}



int main(void) {
    list_int nums = list_int_make((int[]){1, 2, 3}, 3);
    list_int_push(&nums, 4);
    printf("%d\n", nums.len);
    printf("%d\n", nums.data[0]);
    return 0;
}

