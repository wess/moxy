Result<int> safe_div(int a, int b) {
  if (b == 0) {
    Result<int> e = Err("division by zero");
    return e;
  }
  Result<int> r = Ok(a / b);
  return r;
}

void main() {
  // Ok path
  Result<int> r1 = Ok(42);
  match r1 {
    Ok(v) => assert(v == 42),
    Err(e) => assert(false),
  }

  // Err path
  Result<int> r2 = Err("bad");
  match r2 {
    Ok(v) => assert(false),
    Err(e) => assert(true),
  }

  // function returning Result
  Result<int> r3 = safe_div(10, 2);
  match r3 {
    Ok(v) => assert(v == 5),
    Err(e) => assert(false),
  }

  Result<int> r4 = safe_div(10, 0);
  match r4 {
    Ok(v) => assert(false),
    Err(e) => assert(true),
  }
}
