int double_it(int x) {
  return x * 2;
}

int add(int a, int b) {
  return a + b;
}

int negate(int x) {
  return -x;
}

void main() {
  // basic pipe
  int a = 5 |> double_it();
  assert(a == 10);

  // chained pipes
  int b = 3 |> double_it() |> add(1);
  assert(b == 7);

  // pipe to bare function (no parens)
  int c = 4 |> double_it;
  assert(c == 8);

  // triple chain
  int d = 2 |> double_it() |> double_it() |> add(1);
  assert(d == 9);

  // pipe with negate
  int e = 5 |> negate();
  assert(e == -5);
}
